!function(e,t,i,n,a,o,s,r,l){"use strict";const c="data-rownum";s.templateReportRegionInit=function(s,d){let u,p=null,g=null,f=!1;const h=n("#"+s.regionStaticId+"_"+s.regionType),m="data-id";function w(t){let i=y.width(),n=y.height();s._isTemplateReport||e.setOuterWidth(h,i),s.hasSize&&e.setOuterHeight(h,n),t||h.tableModelView("resize")}function b(e){const t=h.tableModelView("getPageInfo")||{};let i=null;n.each(h.find("["+m+"]"),(function(e,a){const o=n(a);if(!t.scrollOffset)return i=o.attr(c),!1;if(o.offset().top-(t.rowHeight/2||0)>=t.scrollOffset)return i=o.attr(c),!1}));const o={ajaxIdentifier:e.ajaxIdentifier,id:e.regionId,pageChange:{offset:t.pageOffset,count:t.pageSize,firstDisplayRow:i}};a.plugin({regions:[o]})}function R(e){let t=n(e).find("["+m+"]").first().parent();return t&&t.length||(t=n(e).children().filter((function(){return!["SCRIPT","STYLE"].includes(this.tagName)})).first()),t}function v(){n("button[data-menu^='tc_menu_a']",h).each((function(){const t=e.escapeCSS(this.getAttribute("data-menu"));n(`div.a-Menu[id=${t}]`).remove(),n(`#${t}`).menu()})),h.removeClass("is-loading")}r.info("Init template report region: ",s),d&&d.firstDisplayedRow>1&&(s.firstDisplayedRow=d.firstDisplayedRow-1),s.lazyLoading?s.bodyTemplate&&(s.getDataObjectCallback=R):(s.preRendered?(s.getDataObjectCallback=R,p=d.values&&s.firstDisplayedRow>0?d.values.slice(0,d.firstDisplayedRow-1):[],n.each(R(h).children("["+m+"]"),(function(e,t){const i=n(t),a=i.prop("outerHTML");s.modelOptions.identityField?p.push([i.attr(m),a]):p.push([a])})),d.values&&(p=s.firstDisplayedRow>0?p.concat(d.values.slice(d.firstDisplayedRow-1)):p.concat(d.values)),0===p.length&&(p=null)):p=d.values,d.totalRows&&(g=d.totalRows),u=d.moreData);const x=l.create(s.modelName,n.extend({},s.modelOptions,{shape:"table",recordIsArray:!0,fields:s.columns[0],regionId:s.regionId,ajaxIdentifier:s.ajaxIdentifier,regionData:{ajaxColumns:s.ajaxColumns,ajaxActions:s.ajaxActions,ajaxActionMenus:s.ajaxActionMenus},pageItemsToSubmit:s.itemsToSubmit,callServer:s.modelOptions.callServer,identityField:s.identityField}),p,g,u);g=p=null,u=void 0;const y=h.parent();s.hasSize&&y.css("height",s.reportHeight||y.height()),w(!0),s.entityTitlePlural?s.noDataMessage=o.formatMessage("APEX.NO_DATA_FOUND_ENTITY",s.entityTitlePlural):void 0===s.noDataMessage&&(s.noDataMessage=o.getMessage("APEX.IG.NO_DATA_FOUND"));let I=s.pagination;if(I.scroll&&(I.virtual=void 0!==I.virtual?I.virtual:s.modelOptions.hasTotalRecords),I.savePaginationToServer)if(s.pagination.scroll){const t=n(window);t.on("scroll",e.debounce((function(){h.is(":visible")&&t.scrollTop()>=h.offset().top-window.innerHeight&&t.scrollTop()<=h.offset().top+h.height()&&b(s)}),600)),s.pageChange=v}else s.pageChange=function(){v(),f&&b(s),f=!0};if(s.fixedRowHeight=!1,h.tableModelView(s),s._isTemplateReport){new ResizeObserver(e.debounce((function(){w()}),100)).observe(h.parent()[0])}else t.onElementResize(h.parent()[0],(()=>{w()}));t.onVisibilityChange(h[0],(e=>{e&&(s._isTemplateReport||t.updateResizeSensors(y[0]),w())})),i.create(s.regionStaticId,{type:s.regionType,parentRegionId:s.parentRegionStaticId,widgetName:"tableModelView",filterRegionId:s.filterRegionId,widget:function(){return h},refresh:function(){return new Promise((e=>{const t=x.subscribe({onChange:i=>{"refresh"===i&&(x.unSubscribe(t),e())}});x.clearData()||(x.unSubscribe(t),e())}))},getModel:function(){return x}})}}(apex.util,apex.widget.util,apex.region,apex.jQuery,apex.server,apex.lang,apex.widget,apex.debug,apex.model);