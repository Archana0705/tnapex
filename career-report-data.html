<!DOCTYPE html>
<html class="no-js  page-72 app-TNAPEX173" lang="en">

<head>
  <meta http-equiv="x-ua-compatible" content="IE=edge" />
  <meta charset="utf-8">
  <title>Workshop on Agricultural and Processed Food Products Export Promotion On 12th March, 2024 at Vanavarayar
    Institute of Agriculture, College in Pollachi</title>
  <link rel="stylesheet" type="text/css" href="assets/css/Core.min.css">
  <link rel="stylesheet" type="text/css" href="assets/css/Theme-Standard.min.css">
  <link rel="stylesheet" type="text/css" href="assets/css/font-apex.min.css">
  <link rel="stylesheet" type="text/css" href="assets/css/Core_one.min.css">
  <link rel="stylesheet" type="text/css" href="assets/css/aos.min.css">
  <link rel="stylesheet" type="text/css" href="assets/css/custom.min.css">
  <link rel="stylesheet" type="text/css" href="assets/css/Vita.min.css">
  <link rel="apple-touch-icon" href="assets/img/app-icon-192.png" />
  <link rel="icon" href="assets/img/app-icon-32.png" />
  <link href="assets/css/jquery.dataTables.min.css" rel="stylesheet">

  <!-- <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"> -->

  <link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css">


  <style>
    ul.a-MenuBar {
      background: #002d4b;
      color: #fff !important;
    }

    .a-MenuBar {
      list-style: none;
      padding: 0;
      margin: 0;
      background-color: #f8f9fa;
      /* Background color of the menu */
      border: 1px solid #ddd;
      /* Optional border */
    }

    .a-MenuBar-item {
      position: relative;
    }

    .a-MenuBar-item>.a-MenuBar-label {
      display: block;
      padding: 14px 15px;
      text-decoration: none;
      color: #fff;
      /* Text color */
    }

    .a-MenuBar-item ul {
      position: absolute;
      top: 100%;
      /* Position below the menu item */
      left: 0;
      /* Align with the left edge of the menu item */
      background: #002d4b;
      /* Background color of dropdown */
      border: 1px solid #ccc;
      /* Optional border */
      display: none;
      /* Initially hidden */
      z-index: 1000;
      /* Ensure dropdown is on top */
      width: 200px;
      /* Set a fixed width for dropdown */
      padding-left: 0;
      margin-left: 0;
    }

    .a-MenuBar-item ul li {
      list-style: none;
      /* Remove bullets */
    }

    .a-MenuBar-item ul li a {
      display: block;
      /* Make links block elements */
      padding: 10px 15px;
      /* Padding for dropdown items */
      color: #fff;
      /* Text color for dropdown items */
      text-decoration: none;
      /* No underline */
    }

    .a-MenuBar-item ul li a:hover {
      background-color: #dab140;
      /* Background color on hover */
    }
  </style>

  <style type="text/css">
    .form-switch .form-check-input {
      visibility: hidden !important;
    }

    .top-bg h3 {
      font-size: 1.25rem;
      margin-block-end: .75rem;
      line-height: 1.5;
      font-weight: var(--a-base-font-weight-semibold, 500);
      text-align: center;
    }
  </style>


  <style type="text/css">
    @font-face {
      font-family: 'FontApex';
      src: url('../font/apex-5-icon-font.woff2') format('woff2'),
        url('../font/apex-5-icon-font.woff') format('woff');
      font-weight: normal;
      font-style: normal;
    }

    @font-face {
      font-family: 'Font-APEX';
      src: url('../fonts/Font-APEX-Small.woff2') format('woff2'),
        url('../fonts/Font-APEX-Small.woff') format('woff'),
        url('../fonts/Font-APEX-Large.woff2') format('woff2'),
        url('../fonts/Font-APEX-Large.woff') format('woff');
      font-weight: normal;
      font-style: normal;
    }
  </style>
  <style type="text/css">
    .imgg {
      width: 780px;
      height: 450px;
    }
  </style>
  <style>
    #passwordError {
      color: red;
      font-size: 14px;
      display: none;
    }

    #signin-btn {
      opacity: 0.6;
      cursor: not-allowed;
    }
  </style>
  >>>>>>> 8a51a13188f806d94cc1d62925a338ec8a00da18
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="-1" />
  <meta http-equiv="Cache-Control" content="no-cache" />
  <link rel="stylesheet" href="r/wstnapex/173/files/static/v1359/Helvetica.ttf">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
</head>

<body
  class="t-PageBody t-PageBody--hideLeft t-PageBody--hideActions no-anim t-PageTemplate--standard   apex-top-nav apex-icons-fontapex apex-theme-vita"
  id="t_PageBody">
  <div>
    <header class="t-Header" id="t_Header" role="banner">
      <div class="t-Header-branding">
        <div class="t-Header-controls">
          <button class="t-Button t-Button--icon t-Button--header t-Button--headerTree" aria-label="Main Navigation"
            title="Main Navigation" id="t_Button_navControl" type="button"><span class="t-Header-controlsIcon"
              aria-hidden="true"></span></button>
        </div>
        <div class="t-Header-logo">
          <!-- <a href="&#x2F;ords&#x2F;r&#x2F;wstnapex&#x2F;tnapex173&#x2F;home" class="t-Header-logo-link"><span class="apex-logo-text">TNAPEx</span></a> -->
          <div class="gigw">
            <li><a class="btn-decrease"><span class="d-inline-block" tabindex="0" data-toggle="tooltip"
                  title="font size Decrease"><i></i> A -</a></li>
            <li><a class="btn-orig"><span class="d-inline-block" tabindex="0" data-toggle="tooltip"
                  title="Reset font"><i></i> A </a></li>
            <li><a class="btn-increase"><span class="d-inline-block" tabindex="0" data-toggle="tooltip"
                  title="font size Increase"><i></i> A +</a></li>
            <li><a><span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Dark Mode"><i
                    class="t-Icon fa fa-moon-o" id="darkmode"></i></a></li>
            <li><a class="form-check form-switch"><label class="form-check-label" for="screenReaderSwitch">
                  <span class="d-inline-block" tabindex="0" data-toggle="tooltip" title="Screen Reader">
                    <i id="sound" class="t-Icon fa fa-volume-up"></i></label><input class="form-check-input"
                  type="checkbox" role="switch" id="screenReaderSwitch"
                  onclick="readText(document.getElementsByTagName('body')[0])" /></span></a>
            </li>
          </div>
        </div>
        <div class="t-Header-navBar">
          <div class="t-Header-navBar--start"></div>
          <div class="t-Header-navBar--center">
            <ul class="t-NavigationBar " id="91714876982663903">
              <li class="t-NavigationBar-item ">
                <a class="t-Button t-Button--icon t-Button--header t-Button--navBar" href="#" title="" target="">
                  <span class="t-Icon " aria-hidden="true"></span><span class="t-Button-label"></span><span
                    class="t-Button-badge"></span>
                </a>
              </li>
              <!-- <li class="t-NavigationBar-item ">
                  <a class="t-Button t-Button--icon t-Button--header t-Button--navBar" href="javascript:apex.theme42.dialog('\u002Fords\u002Fr\u002Fwstnapex\u002Ftnapex173\u002Fsignup-registration-form\u0026dialogCs=5yFwITY82KyGF4JXzQ6S2Z6y5_UrHgpjslcJBi3IztN-xMlwXoJNxDcPze6ZBRS1z-iW8cAef0R8job1QL5V-Q',{title:'Signup Registration Form',h:'auto',w:'720',mxw:'960',modal:true,dialog:null,dlgCls:'t-Dialog-page--standard '+''},'',apex.gPageContext$)" title="" target="">
                  <span class="t-Icon fa&#x20;fa-user-plus" aria-hidden="true" ></span><span class="t-Button-label">New User</span><span class="t-Button-badge"></span>
                  </a>
                </li> -->
              <!-- <li class="t-NavigationBar-item ">
                  <a class="t-Button t-Button--icon t-Button--header t-Button--navBar" href="login" title="" target="">
                  <span class="t-Icon fa&#x20;fa-user-circle" aria-hidden="true" ></span><span class="t-Button-label">Sign In</span><span class="t-Button-badge"></span>
                  </a>
                </li> -->
              <li class="t-NavigationBar-item " data-bs-toggle="modal" data-bs-target="#new-user">
                <a class="t-Button t-Button--icon t-Button--header t-Button--navBar">
                  <span class="t-Icon fa&#x20;fa-user-plus" aria-hidden="true"></span><span class="t-Button-label">New
                    User</span><span class="t-Button-badge"></span>
                </a>
              </li>
              <li class="t-NavigationBar-item ">
                <a id="signout" class="t-Button t-Button--icon t-Button--header t-Button--navBar" href="#" title=""
                  target="">
                  <span class="t-Icon fa&#x20;fa-user-circle" aria-hidden="true"></span><span
                    class="t-Button-label">Sign Out</span><span class="t-Button-badge"></span>
                </a>
              </li>
            </ul>
          </div>
          <div class="t-Header-navBar--end"></div>
        </div>
      </div>
      <div class="top">
        <div class="top-bg">
          <img id="leftlogo" src="http://150.230.143.29:8080/ords/r/wstnapex/173/files/static/v1359/logo.png">
          <h1 class="dept-name text-middle">Tamil Nadu Food Processing and Agri Export Promotion Corporation (TNAPEx)
          </h1>
          <h3 class="dept2-name text-middle">தமிழ்நாடு உணவு பதப்படுத்துதல் மற்றும் வேளாண் ஏற்றுமதி மேம்பாட்டு கழகம்</h3>
          <img id="rightlogo" src="http://150.230.143.29:8080/ords/r/wstnapex/173/files/static/v1359/tnlogo.png">
        </div>
      </div>
      <div class="t-Header-nav">
        <div class="t-Header-nav-list js-tabLike js-tabLike" id="t_MenuNav">

          <ul class="a-MenuBar">
            <li class="a-MenuBar-item" data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon="fa fa-home">
              <a class="a-MenuBar-label" href="index.html" title="" target="">Department Picture Report <span
                  class="a-Icon icon-menu-split-drop-down"></span></a>
              <ul>
                <li>
                  <a href="department-picture-report.html" title="" target="">Add</a>
                </li>
                <li>
                  <a href="department-picture-report-data.html" title="" target="">View</a>
                </li>
              </ul>
            </li>
            <li class="a-MenuBar-item" data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon="fa fa-home">
              <a class="a-MenuBar-label" href="index.html" title="" target="">Department Employees Report <span
                  class="a-Icon icon-menu-split-drop-down"></span></a>
              <ul>
                <li>
                  <a href="employees-report.html" title="" target="">Add</a>
                </li>
                <li>
                  <a href="employees-report-data.html" title="" target="">View</a>
                </li>
              </ul>
            </li>
            <li class="a-MenuBar-item" data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon="fa fa-home">
              <a class="a-MenuBar-label" href="index.html" title="" target="">Career Requirement Report<span
                  class="a-Icon icon-menu-split-drop-down"></span></a>
              <ul>
                <li>
                  <a href="career-report.html" title="" target="">Add</a>
                </li>
                <li>
                  <a href="career-report-data.html" title="" target="">View</a>
                </li>
              </ul>
            </li>
          </ul>



          <!-- <ul>
              <li class="a-MenuBar-item" data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon="fa&#x20;fa-home">
                <a class="a-MenuBar-label" href="department-picture-report.html" title="" target="">Add Data</a>
              </li>
              <li class="a-MenuBar-item" data-id="" data-disabled="" data-hide="" data-shortcut="" data-icon="fa&#x20;fa-arrow-circle-o-right&#x20;fa-anim-flash"><a class="a-MenuBar-label" href="department-picture-report-data.html" title="" target="">View Data</a></li>
            </ul>
 -->


        </div>
      </div>
  </div>
  </header>
  <div class="t-Body">
    <div class="t-Body-main">
      <div class="t-Body-title" id="t_Body_title"></div>
      <div class="t-Body-content" id="t_Body_content">
        <main id="main" class="t-Body-mainContent">
          <span id="APEX_SUCCESS_MESSAGE" data-template-id="112600661869921540_S"
            class="apex-page-success u-hidden"></span><span id="APEX_ERROR_MESSAGE"
            data-template-id="112600661869921540_E" class="apex-page-error u-hidden"></span>
          <div class="t-Body-fullContent"></div>
          <div class="t-Body-contentInner">
            <div class="container">
              <div class="row ">
                <div class="col col-12 apex-col-auto col-start col-end">
                  <div class="t-Region t-Region--removeHeader js-removeLandmark t-Region--scrollBody"
                    id="R285393792359851747" role="region" aria-label="New">
                    <div class="t-Region-header">
                      <div class="t-Region-headerItems t-Region-headerItems--title">
                        <span class="t-Region-headerIcon"><span class="t-Icon " aria-hidden="true"></span></span>
                        <h2 class="t-Region-title" id="R285393792359851747_heading" data-apex-heading>New</h2>
                      </div>
                      <div class="t-Region-headerItems t-Region-headerItems--buttons"><span
                          class="js-maximizeButtonContainer"></span></div>
                    </div>
                    <div class="t-Region-bodyWrap">
                      <div class="t-Region-buttons t-Region-buttons--top">
                        <div class="t-Region-buttons-left"></div>
                        <div class="t-Region-buttons-right"></div>
                      </div>
                      <div class="t-Region-body">
                        <!-- <button id="openModalBtn">Open Modal</button> -->
                        <!-- <a class="add-btn my-5" href="career-report.html">Add</a> -->
                        <table id="userTable" class="table table-striped">
                          <thead>
                            <tr>
                              <th>S.No</th>
                              <th>File Name</th>
                              <th>Attachment</th>
                              <th>Action</th>
                            </tr>
                          </thead>
                          <tbody>
                            <!-- Dynamic data will be injected here -->
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
        </main>
        <footer class="t-Footer" id="t_Footer" role="contentinfo">
          <div class="t-Footer-body">
            <div class="t-Footer-content"></div>
            <div class="t-Footer-apex">
              <!-- <div class="t-Footer-version">Release 1.0</div>
            <div class="t-Footer-customize"></div>
             -->
              <div class="row">
                <div class="col text-middle">
                  <h5>Office</h5>
                  <span aria-hidden="true" class="fa fa-university fa-2x fa-lg"></span>
                  <p><span class="strng">Tamil Nadu Food Processing and Agri Export Promotion Corporation
                      (TNAPEx),</span> <br>1st floor, IC & DIC, SIDCO Corporate Office Building,<br>Thiru. Vi. Ka.
                    Industrial Estate,Guindy, <br>Chennai – 600 032.</p>
                  <div><a href="mailto:mailID@tn.gov.in" class="links">md.tnapex@tn.gov.in, tnfpaec@gmail.com</a></div>
                  <!-- <div><a href="tel:0440000000" class="links"> md.tnapex@tn.gov.in</a></div> -->
                </div>
                <div class="col text-middle">
                  <h5>Locate us</h5>
                  <iframe class="gmap"
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3887.408676199633!2d80.20765587507711!3d13.009627087309198!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3a52676f2b4f98e9%3A0xe18cf1a219707f58!2sCOMMISSIONERATE%20OF%20INDUSTRIES%20AND%20COMMERCE!5e0!3m2!1sen!2sin!4v1703071419786!5m2!1sen!2sin"
                    style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"
                    allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade" view-mode="satelite">
                  </iframe>
                </div>
              </div>
              <hr>
              <div class="row">
                <div class="col text-middle">
                  <img class="footer-logo"
                    src="http://150.230.143.29:8080/ords/r/wstnapex/173/files/static/v1359/logo.png">
                  <p class="text-middle">Content owned by TNAPEx ©</p>
                </div>
                <div class="col text-middle">
                  <img class="footer-logo"
                    src="http://150.230.143.29:8080/ords/r/wstnapex/173/files/static/v1359/tnega_logo.png">
                  <p class="text-middle">Designed and Developed by Tamil Nadu e-Governance Agency</p>
                </div>
                <!-- <div class="main-footer-dtls"><p class="text-middle"><img class="footer-logo" src="r/wstnapex/files/static/v1/tn_logo.png"><br>Content owned by Tamil Nadu Online Gaming Authority ©</p></div>
            <div class="main-footer-dtls"><p class="text-middle"><img class="footer-logo" src="r/wstnapex/files/static/v1/tnega_logo.png"><br>Designed and Developed by Tamil Nadu e-Governance Agency</p></div> -->
              </div>
            </div>
          </div>
          <div class="t-Footer-top">
            <a href="#top" class="t-Footer-topButton" id="t_Footer_topButton" title="Start of page"
              aria-label="Start of page"><span class="a-Icon icon-up-chevron" aria-hidden="true"></span></a>
          </div>
        </footer>
      </div>
    </div>
  </div>
  </div>


  <!-- edit & update  -->
  <div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editModalLabel">Add User Detail</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form id="editForm" enctype="multipart/form-data" autocomplete="off">
            <div class="mb-3">
              <label for="uploadPDF" class="form-label">Upload PDF</label>
              <input type="file" class="form-control" id="uploadPDF" name="upload_pdf" accept="application/pdf"
                required>
            </div>
            <div class="mb-3">
              <label for="currentPDF" class="form-label">Current PDF Filename</label>
              <p id="currentPDF" class="form-control-static"></p>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" id="updateBtn" class="btn btn-primary">Update</button>
        </div>
      </div>
    </div>
  </div>

  <!-- edit & update -->


  <!-- add data -->

  <div class="overlay" id="overlay"></div>
  <div class="modal" id="customModal">
    <div class="modal-header">Add User Detail
      <button id="closeModalBtn">Close</button>
    </div>
    <div class="modal-body">
      <form id="pdf-upload-form" enctype="multipart/form-data" autocomplete="off">
        <label for="pdfFile">Upload PDF Attachment:</label>
        <input type="file" id="pdfFile" accept=".pdf" required>
        <br><br>

        <button type="submit">Upload Attachment</button>
      </form>
    </div>
    <!-- <div class="modal-footer">
      <button id="closeModalBtn">Close</button>
      <button id="updateBtn">Update</button>
    </div> -->
  </div>
  <!-- add data -->

  <!-- add new user -->
  <div class="modal fade" id="new-user" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">New User Creation</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">

          <form id="new-login-form">
            <div class="creds">
              <label class="form-label" for="username">Username</label>
              <input type="text" id="username" placeholder="Username" class="creds form-control" required><br><br>
            </div>
            <div class="creds">
              <label class="form-label" for="password">Password</label>
              <input type="password" id="password" placeholder="Password" class="creds form-control" required><br><br>
            </div>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button class="btn btn-danger" type="submit" id="signin-btn">Create</button>
          </form>


        </div>

      </div>
    </div>
  </div>
  <!-- add new user -->



  <script type="text/javascript" src="assets/js/desktop_all.min.js"></script>
  <script type="text/javascript" src="assets/js/widget.stickyWidget.min.js"></script>
  <script type="text/javascript" src="assets/js/theme42.min.js"></script>
  <script type="text/javascript" src="assets/js/aos.js"></script>
  <script type="text/javascript" src="assets/js/add.min.js"></script>
  <script type="text/javascript" src="assets/js/widget.apexTabs.min.js"></script>
  <script type="text/javascript" src="assets/js/com.oracle.apex.carousel.min.js"></script>
  <script type="text/javascript" src="assets/js/modelViewBase.min.js"></script>
  <script type="text/javascript" src="assets/js/widget.templateReport.min.js"></script>
  <script src="assets/js/jquery.min.js"></script>
  <script src="assets/js/jquery.dataTables.min.js"></script>
  <script type="text/javascript" src="assets/js/bootstrap.bundle.min.js"></script>

  <!-- <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script> -->

  <script>
    const signoutButton = document.getElementById('signout');
    signoutButton.addEventListener('click', () => {
      // Clear the token from localStorage
      localStorage.removeItem('token');

      // Redirect to loginc4f6.html
      window.location.href = 'login.html';
    }); 
  </script>

  <!-- add api -->
  <!-- <script>
    document.addEventListener('DOMContentLoaded', () => {
        const pdfUploadForm = document.getElementById('pdf-upload-form');

        pdfUploadForm.addEventListener('submit', async (e) => {
            e.preventDefault();

            const token = localStorage.getItem('token');
            const pdfFile = document.getElementById('pdfFile').files[0];

            if (!pdfFile || pdfFile.type !== 'application/pdf') {
                alert('Please upload a valid PDF file.');
                return;
            }

            const formData = new FormData();
            formData.append('pdf', pdfFile); // Append the PDF file

            try {
                const response = await fetch('http://192.168.5.247:2208/tnapex/career', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`
                    },
                    body: formData
                });

                if (response.ok) {
                    const data = await response.json();
                    alert('PDF uploaded successfully!');
                    console.log(data);
                    pdfUploadForm.reset(); // Reset the form on success
                    closeModal(); // Close the modal
                    fetchTableData(); // Fetch and refresh the table data
                } else if (response.status === 403) {
                    alert('Session expired. Redirecting to login.');
                    localStorage.removeItem('token');
                    window.location.href = 'login.html';
                } else {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
            } catch (error) {
                alert('PDF upload failed. Please try again.');
                console.error('Error:', error);
            }
        });

        function closeModal() {
            // Close modal logic (for example, hide the modal)
            $('#customModal, #overlay').fadeOut(); // Use jQuery to fade out the modal
        }

        async function fetchTableData() {
            const token = localStorage.getItem('token');
            try {
                const response = await fetch('http://192.168.5.247:2208/tnapex/career', {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${token}`,
                        'Accept': 'application/json'
                    }
                });

                if (response.ok) {
                    const userData = await response.json();
                    const tableBody = $('#userTable tbody');
                    tableBody.empty(); // Clear existing table data

                    // Populate the table with new data
                    userData.forEach((user, index) => {
                        const downloadLink = user.downloadUrl ? `<a href="${user.downloadUrl}" target="_blank">Download</a>` : 'No file';
                        const row = `
                            <tr data-id="${user.id}">
                                <td>${index + 1}</td>
                                <td>${user.pdf_filename || 'N/A'}</td>
                                <td>${downloadLink}</td>
                                <td>
                                    <div class="action-btn-container">
                                        <button type="button" class="edit-btn" data-id="${user.id}">Edit</button>
                                        <button type="button" class="delete-btn" data-id="${user.id}">Delete</button>
                                    </div>
                                </td>
                            </tr>`;

                        tableBody.append(row);


                    });
                } else {
                    console.error('Failed to fetch data:', response.statusText);
                }
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        }

        // Call fetchTableData on page load to populate the table initially
        fetchTableData();

    });
</script> -->

  <!-- <script>
    document.addEventListener('DOMContentLoaded', () => {
        const pdfUploadForm = document.getElementById('pdf-upload-form');

        pdfUploadForm.addEventListener('submit', async (e) => {
            e.preventDefault();

            const token = localStorage.getItem('token');
            const pdfFile = document.getElementById('pdfFile').files[0];

            if (!pdfFile || !pdfFile.type === 'application/pdf') {
                alert('Please upload a valid PDF file.');
                return;
            }

            const formData = new FormData();
            formData.append('pdf', pdfFile); // Append the PDF file

            try {
                const response = await fetch('http://192.168.5.247:2208/tnapex/career', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${token}`
                    },
                    body: formData
                });

                if (response.ok) {
                    const data = await response.json();
                    alert('PDF uploaded successfully!');
                    console.log(data);
                    pdfUploadForm.reset(); // Reset the form on success
                } else if (response.status === 403) {
                    alert('Session expired. Redirecting to login.');
                    localStorage.removeItem('token');
                    window.location.href = 'login.html';
                } else {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
            } catch (error) {
                alert('PDF upload failed. Please try again.');
                console.error('Error:', error);
            }
        });
    });
</script> -->
  <!-- add api -->


  <!-- get api -->
  <script>
    $(document).ready(function () {
      // API call to get data
      $.ajax({
        url: "http://192.168.5.247:2208/tnapex/careerdetails",
        type: "GET",
        headers: {
          "Authorization": "Bearer " + localStorage.getItem('token'),
          "Accept": "application/json"
        },
        success: function (response) {
          console.log(response);
          var userData = Array.isArray(response) ? response : [response];
          var tableBody = $('#userTable tbody');
          tableBody.empty();

          // Loop through the response and build table rows dynamically
          userData.forEach(function (user, index) {
            var downloadLink = user.downloadUrl ? `<a href="${user.downloadUrl}" target="_blank">Download</a>` : 'No file';
            var row = `
                <tr data-id="${user.id}">
                  <td>${index + 1}</td>
                  <td>${user.pdf_filename || 'N/A'}</td>
                  <td>${downloadLink}</td>
                  <td>
                    <div class="action-btn-container">
                      <button type="button" class="edit-btn" data-id="${user.id}">Edit</button>
                      <button type="button" class="delete-btn" data-id="${user.id}">Delete</button>
                    </div>
                  </td>
                </tr>`;
            tableBody.append(row);
          });

          // Initialize DataTable with desired options
          $('#userTable').DataTable({
            "paging": true,
            "searching": true,
            "ordering": true,
            "columnDefs": [
              { "orderable": false, "targets": [3] } // Disable ordering on the Action column
            ]
          });
        },
        error: function (xhr) {
          console.error('Error fetching data:', xhr);
          handleTokenExpiration(xhr); // Handle token expiration here
        }
      });

      // Token expiration handling function
      function handleTokenExpiration(xhr) {
        if (xhr.status === 403) {
          // Remove token from localStorage
          localStorage.removeItem('token');
          // Show alert for session expiration
          alert('Your session is expired. Please log in again.');
          // Redirect to login page
          window.location.href = 'login.html';
        } else {
          alert('Failed to fetch data. Please try again.');
        }
      }

    });
  </script>
  <!-- get api -->
  <!-- delete api -->
  <script>
    // Delete button functionality with token expiration check
    $('#userTable tbody').on('click', '.delete-btn', function () {
      var userId = $(this).closest('tr').data('id');
      if (confirm('Are you sure you want to delete this user detail?')) {
        deleteUserDetail(userId);
      }
    });

    // Function to delete user detail with token expiration check
    async function deleteUserDetail(userId) {
      const token = localStorage.getItem('token');

      try {
        const response = await fetch(`http://192.168.5.247:2208/tnapex/career/${userId}`, {
          method: 'DELETE',
          headers: {
            'Authorization': `Bearer ${token}`,
            'Content-Type': 'application/json'
          }
        });

        if (response.status === 403) {
          handleTokenExpiration();
        } else if (response.status === 204 || response.ok) {
          alert('User detail deleted successfully!');
          $(`tr[data-id="${userId}"]`).remove();
        } else {
          throw new Error(`HTTP error! status: ${response.status}`);
        }
      } catch (error) {
        alert('Delete failed. Please check the ID or try again later.');
        console.error('Error:', error);
      }
    }
  </script>
  <!-- delete api -->

  <!-- edit & update -->
  <script>
    $(document).ready(function () {
      let selectedRow;

      // Edit button functionality
      $('#userTable tbody').on('click', '.edit-btn', function () {
        selectedRow = $(this).closest('tr');
        var userId = selectedRow.data('id');

        // Get the current PDF file name from the table cell
        var currentPDF = selectedRow.find('td:nth-child(2)').text();
        $('#currentPDF').text(currentPDF);

        // Reset file input
        $('#uploadPDF').val('');

        // Show modal
        $('#editModal').modal('show');
      });

      // Update button functionality
      $('#uploadPDF').on('change', function (event) {
        const file = event.target.files[0];
        const fileName = file.name;
        const allowedExtensions = /(\.jpg|\.jpeg|\.pdf|\.doc|\.docx|\.xlsx|\.png)$/i;
        if (!allowedExtensions.test(fileName) || fileName.split('.').length !== 2) {
          alert('Invalid file type. Only .jpg, .jpeg, .pdf, .doc, .docx, .xlsx files are allowed.');
          $(this).val('');
          return;
        }
      });
      $('#updateBtn').on('click', async function (event) {
        debugger;
        var userId = selectedRow.data('id');
        var token = localStorage.getItem('token');
        var formData = new FormData();
        var file = $('#uploadPDF')[0].files[0];
        //const fileName = file.name;
        formData.append('FileName', file);
        // Get the uploaded file
        // var file = $('#uploadPDF')[0].files[0];
        // if (file) {
        //   formData.append('pdf', file);
        // } else {
        //   alert('Please upload a PDF file before updating.');
        //   return;
        // }

        try {
          const response = await fetch(`http://192.168.5.247:2208/tnapex/editcareer/${userId}`, {
            method: 'PUT',
            headers: {
              "Authorization": `Bearer ${token}`
            },
            body: formData
          });

          if (response.status === 403) {
            handleTokenExpiration();
          } else if (!response.ok) {
            throw new Error(`HTTP error! Status: ${response.status}`);
          } else {
            const data = await response.json();
            alert('User detail updated successfully!');

            // Update the table with the new PDF filename
            selectedRow.find('td:nth-child(1)').text(data.pdf_filename || 'N/A');

            // Hide modal after update
            $('#editModal').modal('hide');
            // Reload the full page after success
            location.reload();
          }
        } catch (error) {
          alert('Edit failed. Please check your inputs.');
          console.error('Error:', error);
        }
      });

      // Token expiration handling function
      function handleTokenExpiration() {
        localStorage.removeItem('token');
        alert('Your session has expired. Please log in again.');
        window.location.href = 'login.html';
      }
    });

  </script>
  <!-- edit & update -->

  <!-- navbar -->
  <script>
    $(document).ready(function () {
      // Toggle dropdown on click
      $('.a-MenuBar-item > .a-MenuBar-label').on('click', function (e) {
        e.preventDefault();
        const $submenu = $(this).siblings('ul');
        if ($submenu.is(':visible')) {
          $submenu.slideUp(); // Hide submenu
        } else {
          $('.a-MenuBar-item ul').slideUp(); // Hide other submenus
          $submenu.slideDown(); // Show this submenu
        }
      });

      // Hide the dropdown if clicked outside
      $(document).on('click', function (e) {
        if (!$(e.target).closest('.a-MenuBar-item').length) {
          $('.a-MenuBar-item ul').slideUp(); // Hide all submenus
        }
      });
    });
  </script>
  <!-- navbar -->

  <script type="text/javascript">
    // Check if the user is logged in on protected pages
    $(document).ready(function () {
      const token = localStorage.getItem('token');

      // If no token is found, redirect to the login page
      if (!token) {
        window.location.href = 'login.html';  // Replace 'login.html' with the actual login page URL
      }
    });
  </script>
  <script>
    // This forces a page reload when navigating back
    if (window.history && window.history.pushState) {
      window.history.pushState(null, null, window.location.href);
      window.onpopstate = function () {
        window.history.go(1); // This prevents navigating back to the login page
      };
    }

  </script>
  <!-- new user -->
  <script>

    const loginForm = document.getElementById('new-login-form');

    loginForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;

      const response = await fetch('http://192.168.5.247:2208/auth/register', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username, password })
      });

      // Check if the response was successful (status code 200-299)
      if (response.ok) {
        alert('User created successfully!');
        loginForm.reset(); // Reset form fields

        // Close the Bootstrap modal
        const modalElement = document.getElementById('new-user'); // Replace with your modal's actual ID
        const modalInstance = bootstrap.Modal.getInstance(modalElement); // Get the instance of the modal
        modalInstance.hide(); // Close the modal
      } else {
        alert('New user creation failed. Please try again.');
        console.error('Error:', response.statusText);
      }
    });


  </script>
  <!-- new user -->
  <script>
    AOS.init();
  </script>
</body>

</html>